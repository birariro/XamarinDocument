# FCM 
Firebase Cloud Messaging 의 약자로 Cloud 를 통해 클라이언트에게 메시지를 보내는것을 말한다.

이곳에서는 구현 방법과<br/>
어떻게 관리하고 사용하고있는지를 기록하려한다.<br/>

## 구현방법
[구현방법 블로그](https://blog.naver.com/vps32/222291238139) </br>

## 특징
FCM 의 전송 방식은 3가지 방식이 존재한다.
1. 모든 디바이스 에 보내는 방식
2. 구독을 하여 각 그룹별로 보내는방법
3. 토큰을 활용하여 각 디바이스에게 개인으로 보내는것

위와같이 3가지 방식이 존재하며 1번 방식에 문제가있다면 한번 보낼때 메시지를 1000건만 보낼수있다. <br/>
즉 2000명의 사용자가있을때 이 중에서 1000명만 메시지를 받을수있다는것.<br/>
그렇다고 해서 다시 보내면 이미 받은 사용자가 또 받는 경우가 생길 수 있다.<br/>

따라서 2가지 해결 방안이 나왔다.<br/>

1. 회원가입 순서대로 그룹핑(1000명 이하) 을 하여 FCM을 보낼때 모든 그룹에다가 순차적으로 보낸다.<br/>
2. 회원은 자신이 로그인한 아이디 명을 구독하고 서버는 모든 회원의 id로 FCM을 보낸다.<br/>

이 2가지 방안중 추가 기능을 위해 2번 방법을 사용하기로하였다.<br/>

## 동작 방식
1. 각 클라이언트는 자신의 로그인 Id 를 구독한다.
2. 서버에게 모든 클라이언트에게 보내고싶은 메시지를 전달한다.
3. 서버는 회원id를 모두 조회하여 회원id를 구독으로보고 모두 FCM으로 순차 전송한다.


## 샘플 코드
[샘플코드 GIT](https://github.com/k4keye/Xamarin/tree/master/FCM_simple) </br>
